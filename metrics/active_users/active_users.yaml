id: "metric.active_users"
description: "ê¸°ê°„ ë‹¨ìœ„ë³„ í™œì„± ì‚¬ìš©ì ìˆ˜ (distinct user_id)"
contacts:
  owners: ["slack:#digital-analytics"]

time_grains: ["day","week","month"]
entity_grain: ["user_id"]
rollup_dimensions: ["dim.date","dim.channel","dim.device","dim.region"]
depends_on_models: ["model.app_events"]
tags: ["active_users","dau","wau","mau"]

parameters:
  - name: "as_of_date"
    type: "date"
    required: true
  - name: "time_grain"
    type: "string"
    required: true
    allowed_values: ["day","week","month"]
  - name: "channel"
    type: "string"
    required: false

# ğŸ‘‡ ê³„ì‚°ì‹ê³¼ ì¶”ì¶œ íŠ¹ì´ì‚¬í•­ì„ ë³„ë„ í•„ë“œì— ë¶„ë¦¬
calculation: "COUNT(DISTINCT user_id)"

notes: |
  - event_ts ê¸°ì¤€ìœ¼ë¡œ ê³„ì‚°
  - channel íŒŒë¼ë¯¸í„°ë¡œ í•„í„°ë§ ê°€ëŠ¥
  - ì£¼/ì›”ì€ date_trunc(@as_of_date, time_grain) ê¸°ì¤€ ë²„í‚·íŒ…

sql: "active_users.sql"